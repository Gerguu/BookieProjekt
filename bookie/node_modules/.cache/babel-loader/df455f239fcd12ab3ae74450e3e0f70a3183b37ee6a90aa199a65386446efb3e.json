{"ast":null,"code":"import { MindenkinekUzenet } from \"./mindenkinekuzenet\";\nexport async function Authenticate(emailinput, passwordinput) {\n  fetch(\"https://localhost:44317/api/Profil/authenticate\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      Email: emailinput,\n      Jelszo: passwordinput\n    })\n  }).then(response => {\n    if (!response.ok) {\n      if (response.status === 401) {\n        alert(\"Rossz jelszó\");\n      }\n      if (response.status === 404) {\n        alert(\"Az email cím nem található\");\n      } else {\n        throw new Error(`HTTP hiba! Státuszkód: ${response.status}`);\n      }\n    } else {\n      //console.log(response.body)\n      alert(\"Sikeres bejelentkezés!\");\n    }\n    return response.json();\n  }).then(data => {\n    //console.log(data)\n    localStorage.setItem(\"user\", JSON.stringify(data));\n    //asdasdasdasd\n    var felhasznalok = [user];\n    fetch(`https://localhost:44317/api/Cseveges/${user}`).then(response => {\n      return response.json();\n    }).then(data => {\n      data.forEach(adat => {\n        felhasznalok.push(adat.Felhasznalonev);\n      });\n    });\n    fetch(`https://localhost:44317/api/Profil`).then(response => {\n      return response.json();\n    }).then(data => {\n      data.forEach(element => {\n        if (!felhasznalok.includes(element.Felhasznalonev)) {\n          SendMessage(element.Felhasznalonev, \"\", true, false);\n        }\n      });\n    });\n    //localStorage.getItem(\"user\")\n    //setUser(data)\n    window.location.href = \"http://localhost:3000/\";\n  }).catch(error => {\n    console.error(\"Hiba történt:\", error);\n    //console.log(error)\n    alert(\"Server hiba. Kérlek próbáld meg később!\");\n  });\n}\n_c = Authenticate;\nvar _c;\n$RefreshReg$(_c, \"Authenticate\");","map":{"version":3,"names":["MindenkinekUzenet","Authenticate","emailinput","passwordinput","fetch","method","headers","body","JSON","stringify","Email","Jelszo","then","response","ok","status","alert","Error","json","data","localStorage","setItem","felhasznalok","user","forEach","adat","push","Felhasznalonev","element","includes","SendMessage","window","location","href","catch","error","console","_c","$RefreshReg$"],"sources":["D:/NagyProjekt/bookie/src/components/assets/scripts/authenticate.js"],"sourcesContent":["import { MindenkinekUzenet } from \"./mindenkinekuzenet\"\r\n\r\nexport async function Authenticate(emailinput, passwordinput) {\r\n    fetch(\"https://localhost:44317/api/Profil/authenticate\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n            Email: emailinput,\r\n            Jelszo: passwordinput\r\n        })\r\n    })\r\n        .then((response) => {\r\n            if (!response.ok) {\r\n                if (response.status === 401) {\r\n                    alert(\"Rossz jelszó\")\r\n                }\r\n                if (response.status === 404) {\r\n                    alert(\"Az email cím nem található\")\r\n                }\r\n                else {\r\n                    throw new Error(`HTTP hiba! Státuszkód: ${response.status}`)\r\n                }\r\n            }\r\n            else {\r\n                //console.log(response.body)\r\n                alert(\"Sikeres bejelentkezés!\")\r\n            }\r\n            return response.json()\r\n\r\n        })\r\n        .then(data=>{\r\n            //console.log(data)\r\n            localStorage.setItem(\"user\",JSON.stringify(data))\r\n            //asdasdasdasd\r\n            var felhasznalok = [user]\r\n            fetch(`https://localhost:44317/api/Cseveges/${user}`)\r\n                .then(response => {\r\n                    return response.json()\r\n                })\r\n                .then(data => {\r\n                    data.forEach(adat => {\r\n                        felhasznalok.push(adat.Felhasznalonev)\r\n                    });\r\n                })\r\n            fetch(`https://localhost:44317/api/Profil`)\r\n                .then(response => {\r\n                    return response.json()\r\n                })\r\n                .then(data => {\r\n                    data.forEach(element => {\r\n                        if (!felhasznalok.includes(element.Felhasznalonev)) {\r\n                            SendMessage(element.Felhasznalonev, \"\", true, false)\r\n                        }\r\n                    });\r\n                })\r\n            //localStorage.getItem(\"user\")\r\n            //setUser(data)\r\n            window.location.href=\"http://localhost:3000/\"\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Hiba történt:\", error);\r\n            //console.log(error)\r\n            alert(\"Server hiba. Kérlek próbáld meg később!\");\r\n        })\r\n}"],"mappings":"AAAA,SAASA,iBAAiB,QAAQ,qBAAqB;AAEvD,OAAO,eAAeC,YAAYA,CAACC,UAAU,EAAEC,aAAa,EAAE;EAC1DC,KAAK,CAAC,iDAAiD,EAAE;IACrDC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACjBC,KAAK,EAAER,UAAU;MACjBS,MAAM,EAAER;IACZ,CAAC;EACL,CAAC,CAAC,CACGS,IAAI,CAAEC,QAAQ,IAAK;IAChB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;MACd,IAAID,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;QACzBC,KAAK,CAAC,cAAc,CAAC;MACzB;MACA,IAAIH,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;QACzBC,KAAK,CAAC,4BAA4B,CAAC;MACvC,CAAC,MACI;QACD,MAAM,IAAIC,KAAK,CAAC,0BAA0BJ,QAAQ,CAACE,MAAM,EAAE,CAAC;MAChE;IACJ,CAAC,MACI;MACD;MACAC,KAAK,CAAC,wBAAwB,CAAC;IACnC;IACA,OAAOH,QAAQ,CAACK,IAAI,CAAC,CAAC;EAE1B,CAAC,CAAC,CACDN,IAAI,CAACO,IAAI,IAAE;IACR;IACAC,YAAY,CAACC,OAAO,CAAC,MAAM,EAACb,IAAI,CAACC,SAAS,CAACU,IAAI,CAAC,CAAC;IACjD;IACA,IAAIG,YAAY,GAAG,CAACC,IAAI,CAAC;IACzBnB,KAAK,CAAC,wCAAwCmB,IAAI,EAAE,CAAC,CAChDX,IAAI,CAACC,QAAQ,IAAI;MACd,OAAOA,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC1B,CAAC,CAAC,CACDN,IAAI,CAACO,IAAI,IAAI;MACVA,IAAI,CAACK,OAAO,CAACC,IAAI,IAAI;QACjBH,YAAY,CAACI,IAAI,CAACD,IAAI,CAACE,cAAc,CAAC;MAC1C,CAAC,CAAC;IACN,CAAC,CAAC;IACNvB,KAAK,CAAC,oCAAoC,CAAC,CACtCQ,IAAI,CAACC,QAAQ,IAAI;MACd,OAAOA,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC1B,CAAC,CAAC,CACDN,IAAI,CAACO,IAAI,IAAI;MACVA,IAAI,CAACK,OAAO,CAACI,OAAO,IAAI;QACpB,IAAI,CAACN,YAAY,CAACO,QAAQ,CAACD,OAAO,CAACD,cAAc,CAAC,EAAE;UAChDG,WAAW,CAACF,OAAO,CAACD,cAAc,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC;QACxD;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;IACN;IACA;IACAI,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAC,wBAAwB;EACjD,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;IACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACrC;IACAnB,KAAK,CAAC,yCAAyC,CAAC;EACpD,CAAC,CAAC;AACV;AAACqB,EAAA,GAhEqBpC,YAAY;AAAA,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}