{"ast":null,"code":"export async function Patch(oldpasswd) {\n  var user = JSON.parse(localStorage.getItem(\"user\"));\n  console.log(user);\n  var newpasswd = document.getElementById(\"passwordupdate\");\n  var telefon = document.getElementById(\"telefonupdate\");\n  var fullname = document.getElementById(\"fullnameupdate\");\n  var telepules = document.getElementById(\"telepulesupdate\");\n  var valasz = false;\n  fetch(`https://localhost:44317/api/Profil/${user.Felhasznalonev}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      RegiJelszo: oldpasswd,\n      UjJelszo: newpasswd == null ? null : newpasswd.value,\n      Telefonszam: telefon == null ? null : telefon.value,\n      TeljesNev: fullname == null ? null : fullname.value,\n      TelepulesNev: telepules == null ? null : telepules.value\n    })\n  }).then(response => {\n    if (!response.ok) {\n      if (response.status === 401) {\n        alert(\"Rossz jelszó\");\n        valasz = true;\n      }\n      if (response.status === 409) {\n        alert(\"Az új jelszavad nem lehet a régi jelszavad\");\n        valasz = true;\n      }\n      if (response.status === 404) {\n        alert(\"Nem találtunk ilyen települést\");\n        valasz = true;\n      } else {\n        throw new Error(`HTTP hiba! Státuszkód: ${response.status}`);\n      }\n    } else {\n      alert(\"Sikeres módosítás!\");\n      return response.json();\n    }\n  }).then(data => {\n    if (data != null) {\n      localStorage.setItem(\"user\", JSON.stringify(data));\n    }\n    window.location.href = \"http://localhost:3000/Profil\";\n  }).catch(error => {\n    console.error(\"Hiba történt:\", error);\n    if (!valasz) {\n      alert(\"Server hiba. Kérlek próbáld meg később!\");\n    }\n  });\n}\n_c = Patch;\nvar _c;\n$RefreshReg$(_c, \"Patch\");","map":{"version":3,"names":["Patch","oldpasswd","user","JSON","parse","localStorage","getItem","console","log","newpasswd","document","getElementById","telefon","fullname","telepules","valasz","fetch","Felhasznalonev","method","headers","body","stringify","RegiJelszo","UjJelszo","value","Telefonszam","TeljesNev","TelepulesNev","then","response","ok","status","alert","Error","json","data","setItem","window","location","href","catch","error","_c","$RefreshReg$"],"sources":["D:/Programming/NagyProjekt/New folder/BookieProjekt/bookie/src/components/assets/scripts/patch.js"],"sourcesContent":["export async function Patch(oldpasswd) {\r\n    var user = JSON.parse(localStorage.getItem(\"user\"))\r\n    console.log(user)\r\n    var newpasswd = document.getElementById(\"passwordupdate\")\r\n    var telefon = document.getElementById(\"telefonupdate\")\r\n    var fullname = document.getElementById(\"fullnameupdate\")\r\n    var telepules = document.getElementById(\"telepulesupdate\")\r\n    var valasz=false;\r\n    fetch(`https://localhost:44317/api/Profil/${user.Felhasznalonev}`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n            RegiJelszo: oldpasswd,\r\n            UjJelszo: newpasswd == null ? null : newpasswd.value,\r\n            Telefonszam: telefon == null ? null : telefon.value,\r\n            TeljesNev: fullname == null ? null : fullname.value,\r\n            TelepulesNev: telepules == null ? null : telepules.value\r\n        })\r\n    })\r\n        .then((response) => {\r\n            if (!response.ok) {\r\n                if (response.status === 401) {\r\n                    alert(\"Rossz jelszó\")\r\n                    valasz=true\r\n                }\r\n                if (response.status === 409) {\r\n                    alert(\"Az új jelszavad nem lehet a régi jelszavad\")\r\n                    valasz=true\r\n                }\r\n                if (response.status === 404) {\r\n                    alert(\"Nem találtunk ilyen települést\")\r\n                    valasz=true\r\n                }   \r\n                else {\r\n\r\n                    throw new Error(`HTTP hiba! Státuszkód: ${response.status}`)\r\n                }\r\n            }\r\n            else {\r\n                alert(\"Sikeres módosítás!\")\r\n                return response.json()\r\n            }\r\n            \r\n        })\r\n        .then((data)=>{\r\n            if(data!=null){\r\n                localStorage.setItem(\"user\",JSON.stringify(data))\r\n            }\r\n            window.location.href=\"http://localhost:3000/Profil\"\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Hiba történt:\", error);\r\n            if(!valasz){\r\n                alert(\"Server hiba. Kérlek próbáld meg később!\");\r\n            }\r\n        })\r\n}"],"mappings":"AAAA,OAAO,eAAeA,KAAKA,CAACC,SAAS,EAAE;EACnC,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACnDC,OAAO,CAACC,GAAG,CAACN,IAAI,CAAC;EACjB,IAAIO,SAAS,GAAGC,QAAQ,CAACC,cAAc,CAAC,gBAAgB,CAAC;EACzD,IAAIC,OAAO,GAAGF,QAAQ,CAACC,cAAc,CAAC,eAAe,CAAC;EACtD,IAAIE,QAAQ,GAAGH,QAAQ,CAACC,cAAc,CAAC,gBAAgB,CAAC;EACxD,IAAIG,SAAS,GAAGJ,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;EAC1D,IAAII,MAAM,GAAC,KAAK;EAChBC,KAAK,CAAC,sCAAsCd,IAAI,CAACe,cAAc,EAAE,EAAE;IAC/DC,MAAM,EAAE,OAAO;IACfC,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,IAAI,EAAEjB,IAAI,CAACkB,SAAS,CAAC;MACjBC,UAAU,EAAErB,SAAS;MACrBsB,QAAQ,EAAEd,SAAS,IAAI,IAAI,GAAG,IAAI,GAAGA,SAAS,CAACe,KAAK;MACpDC,WAAW,EAAEb,OAAO,IAAI,IAAI,GAAG,IAAI,GAAGA,OAAO,CAACY,KAAK;MACnDE,SAAS,EAAEb,QAAQ,IAAI,IAAI,GAAG,IAAI,GAAGA,QAAQ,CAACW,KAAK;MACnDG,YAAY,EAAEb,SAAS,IAAI,IAAI,GAAG,IAAI,GAAGA,SAAS,CAACU;IACvD,CAAC;EACL,CAAC,CAAC,CACGI,IAAI,CAAEC,QAAQ,IAAK;IAChB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;MACd,IAAID,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;QACzBC,KAAK,CAAC,cAAc,CAAC;QACrBjB,MAAM,GAAC,IAAI;MACf;MACA,IAAIc,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;QACzBC,KAAK,CAAC,4CAA4C,CAAC;QACnDjB,MAAM,GAAC,IAAI;MACf;MACA,IAAIc,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;QACzBC,KAAK,CAAC,gCAAgC,CAAC;QACvCjB,MAAM,GAAC,IAAI;MACf,CAAC,MACI;QAED,MAAM,IAAIkB,KAAK,CAAC,0BAA0BJ,QAAQ,CAACE,MAAM,EAAE,CAAC;MAChE;IACJ,CAAC,MACI;MACDC,KAAK,CAAC,oBAAoB,CAAC;MAC3B,OAAOH,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC1B;EAEJ,CAAC,CAAC,CACDN,IAAI,CAAEO,IAAI,IAAG;IACV,IAAGA,IAAI,IAAE,IAAI,EAAC;MACV9B,YAAY,CAAC+B,OAAO,CAAC,MAAM,EAACjC,IAAI,CAACkB,SAAS,CAACc,IAAI,CAAC,CAAC;IACrD;IACAE,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAC,8BAA8B;EACvD,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;IACdlC,OAAO,CAACkC,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACrC,IAAG,CAAC1B,MAAM,EAAC;MACPiB,KAAK,CAAC,yCAAyC,CAAC;IACpD;EACJ,CAAC,CAAC;AACV;AAACU,EAAA,GA1DqB1C,KAAK;AAAA,IAAA0C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}